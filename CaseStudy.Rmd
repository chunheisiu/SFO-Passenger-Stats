---
title: "BSDS 100 Case Study"
author: "Jacques Sham & Charles Siu"
date: "3/28/2018"
output: html_document
---

```{r setup, include = F}
knitr::opts_chunk$set(echo = TRUE)
```

```{r libraries, include = F, warning = F}
library(tidyverse)
library(magrittr)
library(zoo)
library(ggplot2)
library(maps)
library(mapdata)
```

```{r init, include = F}
## Set the working dir according to who is working
if ("chunheisiu" %in% strsplit(getwd(), "/")[[1]]) {
  setwd("/Users/chunheisiu/Dropbox/Documents/USF/2018_Spring/BSDS_100/USF-BSDS100-CaseStudy")
} else {
  setwd("/Users/jacquessham/Documents/GitHub/USF-BSDS100-CaseStudy")
}

## Read the data
data <- read.csv("Air_Traffic_Passenger_Statistics.csv")
```

First, let's clean the data.

```{r cleanup}
## Rename the column names
names(data) <- c("date", "operAirline", "operCode", "airline", "code", "isDomestic", "region", "type", "category", "terminal", "area", "pax")

## Convert isDomestic to boolean
data$isDomestic %<>% recode("Domestic" = T, "International" = F)

## Reformat the dates into Date objects
data$date %<>% 
  as.character() %>% 
  as.yearmon("%Y%m") %>% 
  as.Date()

## Get month and year values
data %<>% 
  mutate(month = date %>% format("%b"),
         year = date %>% format("%Y") %>% as.numeric())

# Get min and max dates
year_max <- max(data$year)
year_min <- min(data$year)

## operAirline = Operating Airline, the airline that really operating, some airline would own a child company to operate a single route
## operCode = Operating Airline Code
## airline = Published Airline, mother company airline
## code = Published Airline Code, code for variable "airline"
## isDomestic: If the flight is domestic,T; if international: F
## region: Geom region
## type: activity type; Deplaned means arrival, Enplaned means departure, Thru / Transit is other 
## category: Airline price type; Low fare is Low cost carrier, else are others
## terminal: SFO terminal
## area: area within SFO terminal
## pax: passenger count of given row
```

```{r graph}
data %>% 
  ggplot() +
  geom_bar(aes(x = date)) +
  scale_x_date(breaks = )
```


